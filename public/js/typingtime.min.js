var TypingTime=function(e,n){"use strict";function a(e){switch(e.keyCode){case 8:e.preventDefault(),i();break;case 13:case 32:r(e),e.preventDefault()}}function r(e){e.charCode==y||e.keyCode==y?s():13==e.keyCode?m.hasClass("enter")&&($(u[T]).hasClass("milestone")&&d(),T++,s()):l()}function t(){h=$("#code-container"),p=$("#iframe-container iframe"),f=$("#color-overlay"),p=p[0],u=h.find("ol li.raw"),$(n).on("keydown",a),$(n).on("keypress",r);for(var e=0;e<u.length;e++){var t=u[e];t.innerText=t.innerText.replace("&gt;",">"),t.innerText=t.innerText.replace("&lt;","<"),k.push(t.innerText);for(var i=$("<li>"),s=0;s<t.innerText.length;s++){var l=$("<span>").addClass("initial").html(t.innerText.charAt(s));l.appendTo(i)}{$("<span>").addClass("enter initial").appendTo(i)}if(u[e].innerHTML=i.html(),$(t).hasClass("milestone")){var c=$("<span>").addClass("milestone-text").html("milestone");$(t).append(c)}}C=h.find("span.initial"),o()}function o(){$(C[v]).addClass("char-active"),y=C[v].innerText.charCodeAt(0),w=C[v].innerText.charAt(0),m=$(C[v])}function i(){0!==v&&(m.removeClass("char-error").removeClass("char-active"),m.find("i.fa").remove(),v--,o())}function s(){m.removeClass("char-error").removeClass("char-active"),m.find("i.fa").remove(),C.length-1!=v&&(v++,o())}function l(){if(m.addClass("char-error"),0===m.find("i.fa").length){var e=c(y),n=$("<span>").addClass("error-hint").html(e),a=$("<span>").addClass("key").html("<span>"+w+"</span>"),r=$("<i>").addClass("fa fa-arrow-circle-down").append(n);""!==e&&r.append(a),m.append(r)}}function c(e){return void 0!==x[e]?x[e]:""}function d(){for(var e="",n=0;T>=n;n++)e+=k[n];f.show(),f.velocity({backgroundColorAlpha:0},450,function(){f.attr("style",""),f.hide()}),p.contentWindow.document.open("text/html","replace"),p.contentWindow.document.write(e),p.contentWindow.document.close()}var h,p,f,u,C,m,v=0,y=-1,T=0,w="",k=[],x={123:"open curly bracket",125:"closing curly bracket",91:"open square bracket",93:"closing square bracket",34:"double quotes",39:"single quotes",59:"semicolon",58:"colon"};return{handleKeydown:a,handleKeypress:r,init:t,setCurrentChar:o,setPrevChar:i,setNextChar:s,setErrorChar:l,getKeyHint:c}}(window,document);